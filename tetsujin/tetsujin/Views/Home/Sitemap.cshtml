@using tetsujin.Models;
@{
    var lastPage = System.Math.Ceiling((double)Entry.Count() / Entry.LIMIT);

    var skip = 0;
    var isAdmin = false;
    var isSitemap = true;
    var entries = Entry.GetRecentEntry(skip, isAdmin, isSitemap);
    var latest = entries[0];
    var latestDate = latest.PublishDate.ToString("yyyy-MM-dd");
}
<?xml version="1.0" encoding="UTF-8" ?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <!-- index -->
    <url>
        <loc>@(ViewBag.baseUrl)</loc>
        <lastmod>@latestDate</lastmod>
        <priority>1.0</priority>
    </url>
    <!-- entry -->
    @foreach (var entry in entries)
    {
        <url>
            <loc>@(ViewBag.baseUrl)Entry/@entry.EntryID</loc>
            <lastmod>@entry.PublishDate.ToString("yyyy-MM-dd")</lastmod>
        </url>
    }

    @for (var i = 2; i < lastPage + 1; i++)
    {
        <url>
            <loc>@(ViewBag.baseUrl)Page/@i</loc>
            <lastmod>@latestDate</lastmod>
        </url>
    }
</urlset>